{"version":3,"file":"nn-coop-audio.js","sourceRoot":"","sources":["src/nn-coop-audio.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators.js\";\n\n@customElement(\"nn-coop-audio\")\nexport class NNCoopAudio extends LitElement {\n  @property({ type: String }) src: string = \"\";\n  @property({ type: Boolean }) loop: boolean = false;\n  @property({ type: Boolean }) autoplay: boolean = false;\n  @property({ type: Boolean }) muted: boolean = false;\n  @property({ type: String }) preload: \"none\" | \"metadata\" | \"auto\" = \"auto\";\n  @property({ type: Boolean }) coop: boolean = false;\n  @property({ type: Boolean }) controls: boolean = false;\n  @state() uniq: string = Math.random()\n    .toString(36)\n    .substring(7);\n  @query(\"#audio\") audioElement!: HTMLAudioElement;\n\n  private audioEvent = (e: Event) => {\n    const event = e as CustomEvent;\n    if (event.detail.status === \"play\" && event.detail.uniq !== this.uniq) {\n      const audio = this.shadowRoot?.querySelector(\"#audio\") as HTMLAudioElement;\n      console.log(audio);\n      if (audio) {\n        audio.pause();\n        audio.currentTime = 0;\n      }\n    }\n  };\n\n  firstUpdated() {\n    window.addEventListener(\"nncoopaudio\", this.audioEvent);\n  }\n\n  disconnectedCallback(): void {\n    window.removeEventListener(\"nncoopaudio\", this.audioEvent);\n    super.disconnectedCallback();\n  }\n\n  onPlay() {\n    if (this.coop) {\n      window.dispatchEvent(\n        new CustomEvent(\"nncoopaudio\", {\n          detail: {\n            status: \"play\",\n            uniq: this.uniq,\n          },\n        })\n      );\n    }\n  }\n\n  render() {\n    return html`\n      <style>\n        :host {\n          height: 40px;\n          display: inline-flex;\n        }\n        audio {\n          height: 100%;\n        }\n      </style>\n      <audio\n        id=\"audio\"\n        ?loop=${this.loop}\n        ?autoplay=${this.autoplay}\n        ?muted=${this.muted}\n        .preload=${this.preload}\n        @play=${this.onPlay}\n        ?controls=${this.controls}\n      >\n        <source .src=${this.src} />\n      </audio>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"nn-coop-audio\": NNCoopAudio;\n  }\n}\n"]}